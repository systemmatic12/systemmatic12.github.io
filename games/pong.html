<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong | Neron's Hub</title>
    <style>
        :root { --sidebar-width: 260px; --accent: #6366f1; --bg: #f8fafc; --text: #1e293b; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }
        nav { width: var(--sidebar-width); background: #fff; border-right: 1px solid #e2e8f0; padding: 2rem; position: fixed; height: 100vh; }
        nav ul { list-style: none; margin-top: 2rem; }
        nav li { margin-bottom: 1rem; }
        nav a { text-decoration: none; color: #64748b; font-weight: 600; }
        main { margin-left: var(--sidebar-width); flex-grow: 1; padding: 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        canvas { background: #000; border: 4px solid var(--accent); border-radius: 12px; }
        .score { font-size: 3rem; font-weight: bold; margin-bottom: 0.5rem; font-family: monospace; color: var(--accent); }
        @media (max-width: 768px) { body { flex-direction: column; } nav { width: 100%; height: auto; position: relative; } main { margin-left: 0; } }
    </style>
</head>
<body>
    <nav>
        <div style="font-weight: bold; color: #94a3b8; font-size: 0.8rem;">NAVIGATION</div>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../games.html" style="color: var(--accent);">Arcade</a></li>
        </ul>
    </nav>
    <main>
        <div class="score"><span id="pS">0</span> : <span id="cS">0</span></div>
        <canvas id="pongCanvas" width="600" height="400"></canvas>
        <p style="margin-top: 15px; color: #64748b;">Fair physics. The AI is just very distracted.</p>
    </main>

    <script>
        (function() {
            const canvas = document.getElementById("pongCanvas");
            const ctx = canvas.getContext("2d");
            let pScore = 0, cScore = 0;

            // EQUAL STATS
            const pW = 12;
            const pH = 80; 
            const moveSpeed = 8; 

            let user = { x: 10, y: 160, dy: 0 };
            let com = { x: 578, y: 160 };
            let ball = { x: 300, y: 200, r: 7, spd: 5, dx: 5, dy: 5 };

            // AI specific variables
            let aiDecisionTimer = 0;
            let aiTargetY = 200;

            document.addEventListener("keydown", e => {
                if(e.key == "ArrowUp" || e.key == "w") user.dy = -moveSpeed;
                if(e.key == "ArrowDown" || e.key == "s") user.dy = moveSpeed;
            });
            document.addEventListener("keyup", e => user.dy = 0);

            function reset() {
                ball.x = 300; ball.y = 200;
                ball.spd = 5;
                ball.dx = (Math.random() > 0.5 ? 1 : -1) * 5;
                ball.dy = (Math.random() - 0.5) * 6;
            }

            function update() {
                // User Movement
                user.y += user.dy;
                if(user.y < 0) user.y = 0;
                if(user.y > canvas.height - pH) user.y = canvas.height - pH;

                // Ball Movement
                ball.x += ball.dx; ball.y += ball.dy;

                // --- DUMB AI LOGIC (Fair Speed) ---
                aiDecisionTimer++;
                // AI only re-evaluates the ball position every 25 frames (~0.4 seconds)
                if (aiDecisionTimer % 25 === 0) {
                    // 30% chance AI predicts WRONG and goes to a random spot
                    if (Math.random() < 0.3) {
                        aiTargetY = Math.random() * canvas.height;
                    } else {
                        aiTargetY = ball.y;
                    }
                }

                let paddleCenter = com.y + pH / 2;
                if (paddleCenter < aiTargetY - 10) {
                    com.y += moveSpeed; // Same speed as you
                } else if (paddleCenter > aiTargetY + 10) {
                    com.y -= moveSpeed; // Same speed as you
                }

                if(com.y < 0) com.y = 0;
                if(com.y > canvas.height - pH) com.y = canvas.height - pH;

                // Wall Bounce
                if(ball.y + ball.r > 400 || ball.y - ball.r < 0) ball.dy = -ball.dy;

                // Collisions
                let p = (ball.x < 300) ? user : com;
                if(ball.x + ball.r > p.x && ball.x - ball.r < p.x + pW && ball.y > p.y && ball.y < p.y + pH) {
                    let cp = (ball.y - (p.y + pH/2)) / (pH/2);
                    let angle = (Math.PI/4) * cp;
                    ball.dx = (ball.x < 300 ? 1 : -1) * ball.spd * Math.cos(angle);
                    ball.dy = ball.spd * Math.sin(angle);
                    ball.spd += 0.2;
                }

                if(ball.x < 0) { cScore++; document.getElementById("cS").innerText = cScore; reset(); }
                if(ball.x > 600) { pScore++; document.getElementById("pS").innerText = pScore; reset(); }
            }

            function draw() {
                ctx.fillStyle = "#000"; ctx.fillRect(0, 0, 600, 400);
                ctx.fillStyle = "#6366f1"; ctx.fillRect(user.x, user.y, pW, pH);
                ctx.fillStyle = "#fff"; ctx.fillRect(com.x, com.y, pW, pH);
                ctx.beginPath(); ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2); ctx.fill();
                update(); requestAnimationFrame(draw);
            }
            draw();
        })();
    </script>
</body>
</html>
