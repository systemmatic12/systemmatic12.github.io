<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong AI | Neron's Hub</title>
    <style>
        :root { --sidebar-width: 260px; --accent: #6366f1; --bg: #f8fafc; --text: #1e293b; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }
        
        /* Sidebar Navigation */
        nav { width: var(--sidebar-width); background: #ffffff; border-right: 1px solid #e2e8f0; padding: 2.5rem; position: fixed; height: 100vh; }
        nav h2 { font-size: 0.85rem; text-transform: uppercase; color: #94a3b8; margin-bottom: 2rem; }
        nav ul { list-style: none; }
        nav li { margin-bottom: 1.2rem; }
        nav a { text-decoration: none; color: #64748b; font-weight: 600; }

        /* Main Content */
        main { margin-left: var(--sidebar-width); flex-grow: 1; padding: 3rem; display: flex; flex-direction: column; align-items: center; }
        canvas { background: #000; border: 4px solid var(--accent); border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .score { font-size: 2.5rem; font-weight: bold; color: var(--accent); margin-bottom: 10px; font-family: monospace; }
        
        @media (max-width: 768px) {
            body { flex-direction: column; }
            nav { width: 100%; height: auto; position: relative; padding: 1.5rem; border-bottom: 1px solid #e2e8f0; }
            nav ul { display: flex; flex-wrap: wrap; gap: 15px; }
            main { margin-left: 0; padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <nav>
        <h2>Navigation</h2>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../games.html" style="color: var(--accent);">Arcade</a></li>
            <li><a href="../media.html">Media</a></li>
            <li><a href="../guestbook.html">Guestbook</a></li>
        </ul>
    </nav>

    <main>
        <div class="score"><span id="pScore">0</span> : <span id="cScore">0</span></div>
        <canvas id="pong" width="600" height="400"></canvas>
        <p style="margin-top:15px; color:#64748b;">Hold <b>W / S</b> or <b>Up / Down</b> to move</p>
        <a href="../games.html" style="margin-top:20px; color:var(--accent); text-decoration:none; font-weight:bold;">‚Üê Back to Arcade</a>
    </main>

    <script>
        const canvas = document.getElementById("pong");
        const ctx = canvas.getContext("2d");

        let pScore = 0, cScore = 0;
        const paddleWidth = 12, paddleHeight = 80;
        
        let user = { x: 10, y: canvas.height/2 - paddleHeight/2, dy: 0 };
        let com = { x: canvas.width - 10 - paddleWidth, y: canvas.height/2 - paddleHeight/2 };
        let ball = { x: canvas.width/2, y: canvas.height/2, r: 7, speed: 6, dx: 6, dy: 6 };

        // SMOOTH MOVEMENT LISTENERS
        document.addEventListener("keydown", e => {
            if(e.key == "ArrowUp" || e.key == "w") user.dy = -8;
            if(e.key == "ArrowDown" || e.key == "s") user.dy = 8;
        });

        document.addEventListener("keyup", e => {
            if(e.key == "ArrowUp" || e.key == "w" || e.key == "ArrowDown" || e.key == "s") user.dy = 0;
        });

        function resetBall() {
            ball.x = canvas.width/2; ball.y = canvas.height/2;
            ball.speed = 6; ball.dx = -ball.dx;
        }

        function drawNet() {
            ctx.setLineDash([10, 10]);
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.strokeStyle = "#ffffff44";
            ctx.stroke();
            ctx.setLineDash([]); // Reset dash
        }

        function update() {
            // Move Player
            user.y += user.dy;
            if(user.y < 0) user.y = 0;
            if(user.y > canvas.height - paddleHeight) user.y = canvas.height - paddleHeight;

            // Move Ball
            ball.x += ball.dx; ball.y += ball.dy;
            if(ball.x > canvas.width / 2) {
    com.y += (ball.y - (com.y + paddleHeight/2)) * comLevel;
}

            // AI Logic (Right Paddle)
            let comLevel = 0.06; 
            com.y += (ball.y - (com.y + paddleHeight/2)) * comLevel;

            // Wall bounce (Top & Bottom)
            if(ball.y + ball.r > canvas.height || ball.y - ball.r < 0) ball.dy = -ball.dy;

            // Paddle collision
            let player = (ball.x < canvas.width/2) ? user : com;
            if(ball.x + ball.r > player.x && ball.x - ball.r < player.x + paddleWidth && 
               ball.y > player.y && ball.y < player.y + paddleHeight) {
                
                // Calculate where it hit the paddle to change angle
                let collidePoint = (ball.y - (player.y + paddleHeight/2)) / (paddleHeight/2);
                let angleRad = (Math.PI/4) * collidePoint;
                let direction = (ball.x < canvas.width/2) ? 1 : -1;
                
                ball.dx = direction * ball.speed * Math.cos(angleRad);
                ball.dy = ball.speed * Math.sin(angleRad);
                ball.speed += 0.3; // Get faster!
            }

            // Scoring
            if(ball.x - ball.r < 0) { cScore++; document.getElementById("cScore").innerText = cScore; resetBall(); }
            if(ball.x + ball.r > canvas.width) { pScore++; document.getElementById("pScore").innerText = pScore; resetBall(); }
        }

        function draw() {
            ctx.fillStyle = "#000"; ctx.fillRect(0,0,canvas.width,canvas.height);
            drawNet();
            
            // Player Paddle
            ctx.fillStyle = "#6366f1"; ctx.fillRect(user.x, user.y, paddleWidth, paddleHeight);
            // AI Paddle
            ctx.fillStyle = "#fff"; ctx.fillRect(com.x, com.y, paddleWidth, paddleHeight);
            // Ball
            ctx.fillStyle = "#fff"; ctx.beginPath(); ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2); ctx.fill();
            
            update(); 
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
