<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong | Neron's Hub</title>
    <style>
        :root { --sidebar-width: 260px; --accent: #6366f1; --bg: #f8fafc; --text: #1e293b; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }
        
        nav { width: var(--sidebar-width); background: #fff; border-right: 1px solid #e2e8f0; padding: 2rem; position: fixed; height: 100vh; }
        nav h2 { font-size: 0.8rem; color: #94a3b8; letter-spacing: 1px; margin-bottom: 2rem; }
        nav ul { list-style: none; }
        nav li { margin-bottom: 1rem; }
        nav a { text-decoration: none; color: #64748b; font-weight: 600; }

        main { margin-left: var(--sidebar-width); flex-grow: 1; padding: 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        canvas { background: #000; border: 4px solid var(--accent); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .score { font-size: 3rem; font-weight: bold; margin-bottom: 0.5rem; font-family: monospace; color: var(--accent); }

        @media (max-width: 768px) {
            body { flex-direction: column; }
            nav { width: 100%; height: auto; position: relative; padding: 1rem; border-bottom: 1px solid #eee; }
            nav ul { display: flex; gap: 15px; }
            main { margin-left: 0; }
        }
    </style>
</head>
<body>
    <nav>
        <h2>NAVIGATION</h2>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../games.html" style="color: var(--accent);">Arcade</a></li>
        </ul>
    </nav>

    <main>
        <div class="score"><span id="pS">0</span> : <span id="cS">0</span></div>
        <canvas id="pongCanvas"></canvas>
        <p style="margin-top: 15px; color: #64748b;">Arrows/WS to move. You are now faster than the AI.</p>
        <a href="../games.html" style="margin-top:20px; color:var(--accent); text-decoration:none; font-weight:bold;">‚Üê Back</a>
    </main>

    <script>
        (function() {
            const canvas = document.getElementById("pongCanvas");
            const ctx = canvas.getContext("2d");
            canvas.width = 600; canvas.height = 400;

            let pScore = 0, cScore = 0;
            const pW = 12, pH = 80;
            
            // SPEEDS - You are 8, AI is only 5. You can literally outrun it.
            const playerSpeed = 8;
            const aiMaxSpeed = 5; 

            let user = { x: 10, y: 160, dy: 0 };
            let com = { x: 578, y: 160 };
            let ball = { x: 300, y: 200, r: 7, spd: 4.5, dx: 4.5, dy: 4.5 };

            document.addEventListener("keydown", e => {
                if(e.key == "ArrowUp" || e.key == "w") user.dy = -playerSpeed;
                if(e.key == "ArrowDown" || e.key == "s") user.dy = playerSpeed;
            });
            document.addEventListener("keyup", e => {
                if(e.key == "ArrowUp" || e.key == "w" || e.key == "ArrowDown" || e.key == "s") user.dy = 0;
            });

            function reset() {
                ball.x = 300; ball.y = 200;
                ball.spd = 4.5;
                ball.dx = (Math.random() > 0.5 ? 1 : -1) * 4.5;
                ball.dy = (Math.random() - 0.5) * 5;
            }

            function update() {
                user.y += user.dy;
                if(user.y < 0) user.y = 0;
                if(user.y > 320) user.y = 320;

                ball.x += ball.dx; ball.y += ball.dy;

                // --- NEW "DUMB" AI LOGIC ---
                // AI only "looks" at the ball if it's really close (70% across)
                if (ball.x > 400) {
                    // 20% chance the AI just freezes or hesitates this frame
                    if (Math.random() > 0.2) {
                        let paddleCenter = com.y + pH / 2;
                        if (paddleCenter < ball.y - 15) com.y += aiMaxSpeed;
                        else if (paddleCenter > ball.y + 15) com.y -= aiMaxSpeed;
                    }
                }
                if(com.y < 0) com.y = 0;
                if(com.y > 320) com.y = 320;

                // Wall Bounce
                if(ball.y + ball.r > 400 || ball.y - ball.r < 0) ball.dy = -ball.dy;

                // Paddle Collision
                let p = (ball.x < 300) ? user : com;
                if(ball.x + ball.r > p.x && ball.x - ball.r < p.x + pW && ball.y > p.y && ball.y < p.y + pH) {
                    let cp = (ball.y - (p.y + pH/2)) / (pH/2);
                    let angle = (Math.PI/4) * cp;
                    ball.dx = (ball.x < 300 ? 1 : -1) * ball.spd * Math.cos(angle);
                    ball.dy = ball.spd * Math.sin(angle);
                    ball.spd += 0.2;
                }

                if(ball.x < 0) { cScore++; document.getElementById("cS").innerText = cScore; reset(); }
                if(ball.x > 600) { pScore++; document.getElementById("pS").innerText = pScore; reset(); }
            }

            function draw() {
                ctx.fillStyle = "#000"; ctx.fillRect(0, 0, 600, 400);
                ctx.fillStyle = "#6366f1"; ctx.fillRect(user.x, user.y, pW, pH);
                ctx.fillStyle = "#fff"; ctx.fillRect(com.x, com.y, pW, pH);
                ctx.beginPath(); ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2); ctx.fill();
                update(); requestAnimationFrame(draw);
            }
            draw();
        })();
    </script>
</body>
</html>
