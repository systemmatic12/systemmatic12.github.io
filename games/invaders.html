<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invaders | Neron's Hub</title>
    <style>
        :root { --sidebar-width: 260px; --classic-green: #00FF00; --bg: #000000; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: #111; color: var(--classic-green); display: flex; min-height: 100vh; }
        
        /* Sidebar */
        nav { width: var(--sidebar-width); background: #000; border-right: 1px solid #333; padding: 2.5rem; position: fixed; height: 100vh; }
        nav h2 { font-size: 0.8rem; color: #555; letter-spacing: 2px; margin-bottom: 2rem; }
        nav ul { list-style: none; }
        nav li { margin-bottom: 1.2rem; }
        nav a { text-decoration: none; color: #888; font-weight: bold; transition: 0.3s; }
        nav a:hover { color: var(--classic-green); }

        /* Game Area */
        main { margin-left: var(--sidebar-width); flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        canvas { 
            background: #000; 
            border: 2px solid #333; 
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.1);
        }

        .score-box { 
            width: 600px; 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 10px; 
            font-size: 1.5rem;
            text-shadow: 0 0 5px var(--classic-green);
        }

        @media (max-width: 768px) {
            body { flex-direction: column; }
            nav { width: 100%; height: auto; position: relative; border-right: none; border-bottom: 1px solid #333; }
            main { margin-left: 0; padding: 1rem; }
        }
    </style>
</head>
<body>
    <nav>
        <h2>NAVIGATION</h2>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../games.html">Arcade</a></li>
        </ul>
    </nav>

    <main>
        <div class="score-box">
            <span>SCORE:<span id="score">0000</span></span>
            <span>HI-SCORE: 9999</span>
        </div>
        <canvas id="invCanvas" width="600" height="400"></canvas>
        <p style="margin-top: 20px; color: #444;">[ ARROWS ] TO MOVE - [ SPACE ] TO FIRE</p>
    </main>

    <script>
        const canvas = document.getElementById("invCanvas");
        const ctx = canvas.getContext("2d");

        let score = 0;
        let gameActive = true;

        // Player Cannon
        const player = { x: 280, y: 360, w: 40, h: 15, speed: 5, dx: 0 };

        // Bullets
        let bullets = [];

        // Invader Fleet
        let invaders = [];
        let invDirection = 1;
        let invSpeed = 0.8;

        function initInvaders() {
            for(let r=0; r<4; r++) { // 4 rows
                for(let c=0; c<10; c++) { // 10 columns
                    invaders.push({ x: c * 45 + 50, y: r * 35 + 50, w: 25, h: 18 });
                }
            }
        }
        initInvaders();

        // Keyboard Controls
        document.addEventListener("keydown", e => {
            if(e.key == "ArrowLeft") player.dx = -player.speed;
            if(e.key == "ArrowRight") player.dx = player.speed;
            if(e.key == " " && gameActive) {
                // Limit to 2 bullets on screen at once (classic style)
                if(bullets.length < 2) {
                    bullets.push({ x: player.x + player.w/2 - 2, y: player.y, w: 3, h: 12 });
                }
            }
        });
        document.addEventListener("keyup", e => { if(e.key == "ArrowLeft" || e.key == "ArrowRight") player.dx = 0; });

        function update() {
            if(!gameActive) return;

            player.x += player.dx;
            if(player.x < 0) player.x = 0;
            if(player.x > canvas.width - player.w) player.x = canvas.width - player.w;

            // Move Bullets
            bullets.forEach((b, i) => {
                b.y -= 7;
                if(b.y < 0) bullets.splice(i, 1);
            });

            // Move Invader Fleet
            let shiftDown = false;
            invaders.forEach(inv => {
                inv.x += invDirection * invSpeed;
                if(inv.x + inv.w > canvas.width - 10 || inv.x < 10) shiftDown = true;
            });

            if(shiftDown) {
                invDirection *= -1;
                invaders.forEach(inv => {
                    inv.y += 15;
                    if(inv.y + inv.h >= player.y) {
                        gameActive = false;
                        alert("GAME OVER - EARTH DESTROYED");
                        location.reload();
                    }
                });
                invSpeed += 0.15; // Fleet accelerates
            }

            // Bullet Hits
            bullets.forEach((b, bi) => {
                invaders.forEach((inv, ii) => {
                    if(b.x < inv.x + inv.w && b.x + b.w > inv.x && b.y < inv.y + inv.h && b.y + b.h > inv.y) {
                        invaders.splice(ii, 1);
                        bullets.splice(bi, 1);
                        score += 10;
                        document.getElementById("score").innerText = score.toString().padStart(4, '0');
                    }
                });
            });

            if(invaders.length === 0) {
                gameActive = false;
                alert("VICTORY! ALL INVADERS REPELLED");
                location.reload();
            }
        }

        function draw() {
            // Background
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Player (Laser Cannon)
            ctx.fillStyle = "#00FF00";
            ctx.fillRect(player.x, player.y + 5, player.w, 10); // Base
            ctx.fillRect(player.x + 15, player.y, 10, 5);      // Turret
            ctx.fillRect(player.x + 18, player.y - 4, 4, 4);   // Barrel

            // Draw Bullets
            ctx.fillStyle = "#FFFFFF";
            bullets.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));

            // Draw Invaders
            ctx.fillStyle = "#00FF00";
            invaders.forEach(inv => {
                // Draw a more "alien" shape
                ctx.fillRect(inv.x + 5, inv.y, inv.w - 10, inv.h); // Body
                ctx.fillRect(inv.x, inv.y + 5, 5, 8);             // Left arm
                ctx.fillRect(inv.x + inv.w - 5, inv.y + 5, 5, 8); // Right arm
            });

            update();
            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>
